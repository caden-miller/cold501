<main class="container event">
  <h1 class="header">All Events</h1>
  <% create_link = create_link_for(@role) %>
  <% if create_link.present? %>
    <%= link_to create_link[:name], create_link[:path], class: create_link[:class] %>
  <% end %>

  <div class="calendar">
    <%= month_calendar events: @events do |date, events| %>
      <div class="day">
        <% if events.any? %>
          <%= link_to date.day, event_path(events.first), class: 'event-date' %>
        <% else %>
          <span class="no-event"><%= date.day %></span>
        <% end %>
      </div>
    <% end %>
  </div>

  <ul>
    <% @events.each do |event| %>
      <li>
        <%= link_to event.name, event_path(event) %>
        <%= event.start_time.strftime("%B %d, %Y %l:%M %p") %>
        <% if event.respond_to?(:end_time) && event.end_time.present? %>
          - <%= event.end_time.strftime("%l:%M %p") %>
        <% end %>
        <% action_links = action_links_for(event, @role) %>
        <% action_links.each do |link| %>
          <%= link_to link[:name], link[:path], link.except(:name, :path) %>
        <% end %>
      </li>
    <% end %>
  </ul>

  <%= link_to 'View Archived Events', archived_events_path, class: 'btn btn-info' %>
  <%= link_to 'Return to Home', root_path, class: 'btn btn-secondary' %>
</main>
